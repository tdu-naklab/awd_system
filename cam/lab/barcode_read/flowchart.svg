<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="1335px" preserveAspectRatio="none" style="width:652px;height:1335px;" version="1.1" viewBox="0 0 652 1335" width="652px" zoomAndPan="magnify"><defs><filter height="300%" id="fitf21nll15od" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><ellipse cx="252" cy="20" fill="#000000" filter="url(#fitf21nll15od)" rx="10" ry="10" style="stroke: none; stroke-width: 1.0;"/><rect fill="#FEFECE" filter="url(#fitf21nll15od)" height="34.1328" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="67" x="218.5" y="50"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="47" x="228.5" y="71.6016">Initialize</text><rect fill="#FEFECE" filter="url(#fitf21nll15od)" height="34.1328" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="108" x="198" y="104.1328"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="84" x="212" y="125.7344">矩形領域を選択</text><rect fill="#FEFECE" filter="url(#fitf21nll15od)" height="34.1328" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="168" x="168" y="158.2656"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="144" x="182" y="179.8672">二値化などの下処理を行う</text><rect fill="#FEFECE" filter="url(#fitf21nll15od)" height="34.1328" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="91" x="206.5" y="256.3984"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="67" x="220.5" y="278">n行目を選択</text><path d="M314,314.9424 L314,323.5977 L294,327.5977 L314,331.5977 L314,340.2529 A0,0 0 0 0 314,340.2529 L582,340.2529 A0,0 0 0 0 582,340.2529 L582,324.9424 L572,314.9424 L314,314.9424 A0,0 0 0 0 314,314.9424 " fill="#FBFB77" filter="url(#fitf21nll15od)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M572,314.9424 L572,324.9424 L582,324.9424 L572,314.9424 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="247" x="320" y="332.5107">微分してあげるとコードが書きやすくなる</text><rect fill="#FEFECE" filter="url(#fitf21nll15od)" height="34.1328" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="84" x="210" y="310.5313"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="60" x="224" y="332.1328">数値を微分</text><path d="M362,419.5527 L362,435.8633 L342,439.8633 L362,443.8633 L362,460.1738 A0,0 0 0 0 362,460.1738 L526,460.1738 A0,0 0 0 0 526,460.1738 L526,429.5527 L516,419.5527 L362,419.5527 A0,0 0 0 0 362,419.5527 " fill="#FBFB77" filter="url(#fitf21nll15od)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M516,419.5527 L516,429.5527 L526,429.5527 L516,419.5527 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="143" x="368" y="437.1211">一本目のスタートバーの</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="78" x="368" y="452.4316">開始点を検出</text><rect fill="#FEFECE" filter="url(#fitf21nll15od)" height="62.3984" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="180" x="162" y="408.6641"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="57" x="176" y="430.2656">offset ?: 0</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="131" x="172" y="444.3984">より走査し、数値-255:</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="160" x="172" y="458.5313">白から黒に変わる境目 を探す</text><path d="M383.5,501.9512 L383.5,518.2617 L363.5,522.2617 L383.5,526.2617 L383.5,542.5723 A0,0 0 0 0 383.5,542.5723 L547.5,542.5723 A0,0 0 0 0 547.5,542.5723 L547.5,511.9512 L537.5,501.9512 L383.5,501.9512 A0,0 0 0 0 383.5,501.9512 " fill="#FBFB77" filter="url(#fitf21nll15od)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M537.5,501.9512 L537.5,511.9512 L547.5,511.9512 L537.5,501.9512 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="143" x="389.5" y="519.5195">一本目のスタートバーの</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="78" x="389.5" y="534.8301">終了点を検出</text><rect fill="#FEFECE" filter="url(#fitf21nll15od)" height="62.3984" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="223" x="140.5" y="491.0625"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="199" x="154.5" y="512.6641">数値-255が最初に見つかった所から</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="88" x="150.5" y="526.7969">同様に数値255:</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="160" x="150.5" y="540.9297">黒から白に変わる境目 を探す</text><path d="M392,577.2832 L392,593.5938 L372,597.5938 L392,601.5938 L392,617.9043 A0,0 0 0 0 392,617.9043 L543,617.9043 A0,0 0 0 0 543,617.9043 L543,587.2832 L533,577.2832 L392,577.2832 A0,0 0 0 0 392,577.2832 " fill="#FBFB77" filter="url(#fitf21nll15od)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M533,577.2832 L533,587.2832 L543,587.2832 L533,577.2832 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="117" x="398" y="594.8516">このサイズを基準に</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="130" x="398" y="610.1621">バーコードを検出する</text><rect fill="#FEFECE" filter="url(#fitf21nll15od)" height="48.2656" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="240" x="132" y="573.4609"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="216" x="146" y="595.0625">一本目のスタートバーの開始点と終了点</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="180" x="142" y="609.1953">からスタートバーのサイズを計算</text><rect fill="#FEFECE" filter="url(#fitf21nll15od)" height="34.1328" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="248" x="128" y="734.2041"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="224" x="142" y="755.8057">前回の0以外の数値からの距離を計算する</text><path d="M392,785.3584 L392,801.6689 L372,805.6689 L392,809.6689 L392,825.9795 A0,0 0 0 0 392,825.9795 L565,825.9795 A0,0 0 0 0 565,825.9795 L565,795.3584 L555,785.3584 L392,785.3584 A0,0 0 0 0 392,785.3584 " fill="#FBFB77" filter="url(#fitf21nll15od)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M555,785.3584 L555,795.3584 L565,795.3584 L555,785.3584 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="152" x="398" y="802.9268">±15%のサイズを許容する</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="48" x="398" y="818.2373">※要調整</text><rect fill="#FEFECE" filter="url(#fitf21nll15od)" height="34.1328" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="240" x="132" y="788.6025"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="216" x="146" y="810.2041">スタートバーのサイズ何本分か計算する</text><path d="M410,850.3906 L410,859.0459 L390,863.0459 L410,867.0459 L410,875.7012 A0,0 0 0 0 410,875.7012 L551,875.7012 A0,0 0 0 0 551,875.7012 L551,860.3906 L541,850.3906 L410,850.3906 A0,0 0 0 0 410,850.3906 " fill="#FBFB77" filter="url(#fitf21nll15od)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M541,850.3906 L541,860.3906 L551,860.3906 L541,850.3906 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="120" x="416" y="867.959">黒を1、白を0とする</text><rect fill="#FEFECE" filter="url(#fitf21nll15od)" height="34.1328" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="276" x="114" y="845.9795"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="252" x="128" y="867.5811">検出したバーの数だけリストに数値を追加する</text><polygon fill="#FEFECE" filter="url(#fitf21nll15od)" points="221,685.7266,283,685.7266,295,697.7266,283,709.7266,221,709.7266,209,697.7266,221,685.7266" style="stroke: #A80036; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="22" x="256" y="720.3613">true</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="62" x="221" y="701.8838">0以外の数値</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="25" x="295" y="695.4063">false</text><polygon fill="#FEFECE" filter="url(#fitf21nll15od)" points="252,900.1123,264,912.1123,252,924.1123,240,912.1123,252,900.1123" style="stroke: #A80036; stroke-width: 1.5;"/><polygon fill="#FEFECE" filter="url(#fitf21nll15od)" points="224.5,641.7266,279.5,641.7266,291.5,653.7266,279.5,665.7266,224.5,665.7266,212.5,653.7266,224.5,641.7266" style="stroke: #A80036; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="55" x="224.5" y="657.8838">数値を走査</text><rect fill="#FEFECE" filter="url(#fitf21nll15od)" height="48.2656" style="stroke: #A80036; stroke-width: 1.5;" width="284" x="110" y="966.1123"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="115" x2="115" y1="966.1123" y2="1014.3779"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="389" x2="389" y1="966.1123" y2="1014.3779"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="204" x="124" y="987.7139">検出したリストから各桁を取り出して</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="264" x="120" y="1001.8467">パターンマッチさせてバーコードをデコードする</text><polygon fill="#FEFECE" filter="url(#fitf21nll15od)" points="191.5,1034.3779,312.5,1034.3779,324.5,1046.3779,312.5,1058.3779,191.5,1058.3779,179.5,1046.3779,191.5,1034.3779" style="stroke: #A80036; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="121" x="191.5" y="1050.5352">バーコードが読み取れた</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="22" x="157.5" y="1044.0576">true</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="25" x="324.5" y="1044.0576">false</text><polygon fill="#FEFECE" filter="url(#fitf21nll15od)" points="30,1068.3779,248,1068.3779,238,1102.5107,20,1102.5107" style="stroke: #A80036; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="204" x="34" y="1089.9795">メイン処理にバーコードの番号を送信</text><ellipse cx="134" cy="1132.5107" fill="#FFFFFF" filter="url(#fitf21nll15od)" rx="10" ry="10" style="stroke: #000000; stroke-width: 1.5;"/><line style="stroke: #000000; stroke-width: 2.5;" x1="127.8128" x2="140.1872" y1="1126.3236" y2="1138.6979"/><line style="stroke: #000000; stroke-width: 2.5;" x1="140.1872" x2="127.8128" y1="1126.3236" y2="1138.6979"/><rect fill="#FEFECE" filter="url(#fitf21nll15od)" height="34.1328" style="stroke: #A80036; stroke-width: 1.5;" width="204" x="268" y="1068.3779"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="180" x="282" y="1089.9795">offset += スタートバーのサイズ</text><polygon fill="#FEFECE" filter="url(#fitf21nll15od)" points="252,364.6641,264,376.6641,252,388.6641,240,376.6641,252,364.6641" style="stroke: #A80036; stroke-width: 1.5;"/><polygon fill="#FEFECE" filter="url(#fitf21nll15od)" points="214.5,1162.5107,289.5,1162.5107,301.5,1174.5107,289.5,1186.5107,214.5,1186.5107,202.5,1174.5107,214.5,1162.5107" style="stroke: #A80036; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="75" x="214.5" y="1178.668">offset &lt; width</text><polygon fill="#FEFECE" filter="url(#fitf21nll15od)" points="252,212.3984,264,224.3984,252,236.3984,240,224.3984,252,212.3984" style="stroke: #A80036; stroke-width: 1.5;"/><polygon fill="#FEFECE" filter="url(#fitf21nll15od)" points="224,1206.5107,280,1206.5107,292,1218.5107,280,1230.5107,224,1230.5107,212,1218.5107,224,1206.5107" style="stroke: #A80036; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="56" x="224" y="1222.668">n &lt; height</text><rect fill="#FEFECE" filter="url(#fitf21nll15od)" height="34.1328" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="63" x="220.5" y="1250.5107"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="43" x="230.5" y="1272.1123">Finalize</text><ellipse cx="252" cy="1314.6436" fill="#FFFFFF" filter="url(#fitf21nll15od)" rx="10" ry="10" style="stroke: #000000; stroke-width: 1.5;"/><line style="stroke: #000000; stroke-width: 2.5;" x1="245.8128" x2="258.1872" y1="1308.4564" y2="1320.8307"/><line style="stroke: #000000; stroke-width: 2.5;" x1="258.1872" x2="245.8128" y1="1308.4564" y2="1320.8307"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="252" x2="252" y1="30" y2="50"/><polygon fill="#A80036" points="248,40,252,50,256,40,252,44" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="252" x2="252" y1="84.1328" y2="104.1328"/><polygon fill="#A80036" points="248,94.1328,252,104.1328,256,94.1328,252,98.1328" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="252" x2="252" y1="138.2656" y2="158.2656"/><polygon fill="#A80036" points="248,148.2656,252,158.2656,256,148.2656,252,152.2656" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="252" x2="252" y1="290.5313" y2="310.5313"/><polygon fill="#A80036" points="248,300.5313,252,310.5313,256,300.5313,252,304.5313" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="252" x2="252" y1="471.0625" y2="491.0625"/><polygon fill="#A80036" points="248,481.0625,252,491.0625,256,481.0625,252,485.0625" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="252" x2="252" y1="553.4609" y2="573.4609"/><polygon fill="#A80036" points="248,563.4609,252,573.4609,256,563.4609,252,567.4609" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="252" x2="252" y1="768.3369" y2="788.6025"/><polygon fill="#A80036" points="248,778.6025,252,788.6025,256,778.6025,252,782.6025" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="252" x2="252" y1="822.7354" y2="845.9795"/><polygon fill="#A80036" points="248,835.9795,252,845.9795,256,835.9795,252,839.9795" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="252" x2="252" y1="709.7266" y2="734.2041"/><polygon fill="#A80036" points="248,724.2041,252,734.2041,256,724.2041,252,728.2041" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="295" x2="575" y1="697.7266" y2="697.7266"/><polygon fill="#A80036" points="571,795.6689,575,805.6689,579,795.6689,575,799.6689" style="stroke: #A80036; stroke-width: 1.5;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="575" x2="575" y1="697.7266" y2="912.1123"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="575" x2="264" y1="912.1123" y2="912.1123"/><polygon fill="#A80036" points="274,908.1123,264,912.1123,274,916.1123,270,912.1123" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="252" x2="252" y1="880.1123" y2="900.1123"/><polygon fill="#A80036" points="248,890.1123,252,900.1123,256,890.1123,252,894.1123" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="252" x2="252" y1="665.7266" y2="685.7266"/><polygon fill="#A80036" points="248,675.7266,252,685.7266,256,675.7266,252,679.7266" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="252" x2="252" y1="924.1123" y2="934.1123"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="252" x2="596" y1="934.1123" y2="934.1123"/><polygon fill="#A80036" points="592,803.6689,596,793.6689,600,803.6689,596,799.6689" style="stroke: #A80036; stroke-width: 1.5;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="596" x2="596" y1="653.7266" y2="934.1123"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="596" x2="291.5" y1="653.7266" y2="653.7266"/><polygon fill="#A80036" points="301.5,649.7266,291.5,653.7266,301.5,657.7266,297.5,653.7266" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="212.5" x2="92" y1="653.7266" y2="653.7266"/><polygon fill="#A80036" points="88,789.6689,92,799.6689,96,789.6689,92,793.6689" style="stroke: #A80036; stroke-width: 1.5;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="92" x2="92" y1="653.7266" y2="946.1123"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="92" x2="252" y1="946.1123" y2="946.1123"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="252" x2="252" y1="946.1123" y2="966.1123"/><polygon fill="#A80036" points="248,956.1123,252,966.1123,256,956.1123,252,960.1123" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="252" x2="252" y1="621.7266" y2="641.7266"/><polygon fill="#A80036" points="248,631.7266,252,641.7266,256,631.7266,252,635.7266" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="134" x2="134" y1="1102.5107" y2="1122.5107"/><polygon fill="#A80036" points="130,1112.5107,134,1122.5107,138,1112.5107,134,1116.5107" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="179.5" x2="134" y1="1046.3779" y2="1046.3779"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="134" x2="134" y1="1046.3779" y2="1068.3779"/><polygon fill="#A80036" points="130,1058.3779,134,1068.3779,138,1058.3779,134,1062.3779" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="324.5" x2="370" y1="1046.3779" y2="1046.3779"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="370" x2="370" y1="1046.3779" y2="1068.3779"/><polygon fill="#A80036" points="366,1058.3779,370,1068.3779,374,1058.3779,370,1062.3779" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="370" x2="370" y1="1102.5107" y2="1147.5107"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="370" x2="252" y1="1147.5107" y2="1147.5107"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="252" x2="252" y1="1147.5107" y2="1162.5107"/><polygon fill="#A80036" points="248,1152.5107,252,1162.5107,256,1152.5107,252,1156.5107" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="252" x2="252" y1="1014.3779" y2="1034.3779"/><polygon fill="#A80036" points="248,1024.3779,252,1034.3779,256,1024.3779,252,1028.3779" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="252" x2="252" y1="388.6641" y2="408.6641"/><polygon fill="#A80036" points="248,398.6641,252,408.6641,256,398.6641,252,402.6641" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="301.5" x2="608" y1="1174.5107" y2="1174.5107"/><polygon fill="#A80036" points="604,788.3369,608,778.3369,612,788.3369,608,784.3369" style="stroke: #A80036; stroke-width: 1.5;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="608" x2="608" y1="376.6641" y2="1174.5107"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="608" x2="264" y1="376.6641" y2="376.6641"/><polygon fill="#A80036" points="274,372.6641,264,376.6641,274,380.6641,270,376.6641" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="252" x2="252" y1="344.6641" y2="364.6641"/><polygon fill="#A80036" points="248,354.6641,252,364.6641,256,354.6641,252,358.6641" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="252" x2="252" y1="236.3984" y2="256.3984"/><polygon fill="#A80036" points="248,246.3984,252,256.3984,256,246.3984,252,250.3984" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="292" x2="626" y1="1218.5107" y2="1218.5107"/><polygon fill="#A80036" points="622,737.1826,626,727.1826,630,737.1826,626,733.1826" style="stroke: #A80036; stroke-width: 1.5;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="626" x2="626" y1="224.3984" y2="1218.5107"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="626" x2="264" y1="224.3984" y2="224.3984"/><polygon fill="#A80036" points="274,220.3984,264,224.3984,274,228.3984,270,224.3984" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="252" x2="252" y1="1186.5107" y2="1206.5107"/><polygon fill="#A80036" points="248,1196.5107,252,1206.5107,256,1196.5107,252,1200.5107" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="252" x2="252" y1="192.3984" y2="212.3984"/><polygon fill="#A80036" points="248,202.3984,252,212.3984,256,202.3984,252,206.3984" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="252" x2="252" y1="1230.5107" y2="1250.5107"/><polygon fill="#A80036" points="248,1240.5107,252,1250.5107,256,1240.5107,252,1244.5107" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="252" x2="252" y1="1284.6436" y2="1304.6436"/><polygon fill="#A80036" points="248,1294.6436,252,1304.6436,256,1294.6436,252,1298.6436" style="stroke: #A80036; stroke-width: 1.0;"/><!--
@startuml

start
:Initialize;
: 矩形領域を選択;
: 二値化などの下処理を行う;
repeat
    : n行目を選択;
    : 数値を微分;
        note right: 微分してあげるとコードが書きやすくなる
    repeat
        : offset ?: 0\nより走査し、数値-255:\n白から黒に変わる境目 を探す;
            note right: 一本目のスタートバーの\n開始点を検出
        : 数値-255が最初に見つかった所から\n同様に数値255:\n黒から白に変わる境目 を探す;
            note right: 一本目のスタートバーの\n終了点を検出
        : 一本目のスタートバーの開始点と終了点\nからスタートバーのサイズを計算;
            note right: このサイズを基準に\nバーコードを検出する
        while (数値を走査)
            if (0以外の数値) then (true)
                : 前回の0以外の数値からの距離を計算する;
                : スタートバーのサイズ何本分か計算する;
                note right: ±15%のサイズを許容する\n※要調整
                : 検出したバーの数だけリストに数値を追加する;
                note right: 黒を1、白を0とする
            else (false)
            endif
        endwhile
        : 検出したリストから各桁を取り出して\nパターンマッチさせてバーコードをデコードする|
        if (バーコードが読み取れた) then (true)
            : メイン処理にバーコードの番号を送信/
            end
        else (false)
            : offset += スタートバーのサイズ]
        endif
    repeat while (offset < width)
repeat while (n < height)

:Finalize;
end

@enduml

PlantUML version 1.2019.06(Sat May 25 02:10:25 JST 2019)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Java Version: 1.8.0_211-b12
Operating System: Mac OS X
OS Version: 10.14.5
Default Encoding: UTF-8
Language: ja
Country: US
--></g></svg>