<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="1340px" preserveAspectRatio="none" style="width:649px;height:1340px;" version="1.1" viewBox="0 0 649 1340" width="649px" zoomAndPan="magnify"><defs><filter height="300%" id="fhlnoly5e7qh7" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><ellipse cx="252" cy="20" fill="#000000" filter="url(#fhlnoly5e7qh7)" rx="10" ry="10" style="stroke: none; stroke-width: 1.0;"/><rect fill="#FEFECE" filter="url(#fhlnoly5e7qh7)" height="34.1328" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="67" x="218.5" y="50"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="47" x="228.5" y="71.6016">Initialize</text><rect fill="#FEFECE" filter="url(#fhlnoly5e7qh7)" height="34.1328" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="108" x="198" y="104.1328"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="84" x="212" y="125.7344">矩形領域を選択</text><rect fill="#FEFECE" filter="url(#fhlnoly5e7qh7)" height="34.1328" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="168" x="168" y="158.2656"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="144" x="182" y="179.8672">二値化などの下処理を行う</text><rect fill="#FEFECE" filter="url(#fhlnoly5e7qh7)" height="34.1328" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="91" x="206.5" y="256.3984"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="67" x="220.5" y="278">n行目を選択</text><path d="M314,307.2871 L314,323.5977 L294,327.5977 L314,331.5977 L314,347.9082 A0,0 0 0 0 314,347.9082 L543,347.9082 A0,0 0 0 0 543,347.9082 L543,317.2871 L533,307.2871 L314,307.2871 A0,0 0 0 0 314,307.2871 " fill="#FBFB77" filter="url(#fhlnoly5e7qh7)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M533,307.2871 L533,317.2871 L543,317.2871 L533,307.2871 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="208" x="320" y="324.8555">コードが書きやすく成るだけなので</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="130" x="320" y="340.166">別に微分しなくていい</text><rect fill="#FEFECE" filter="url(#fhlnoly5e7qh7)" height="34.1328" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="84" x="210" y="310.5313"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="60" x="224" y="332.1328">数値を微分</text><path d="M362,422.7969 L362,439.1074 L342,443.1074 L362,447.1074 L362,463.418 A0,0 0 0 0 362,463.418 L526,463.418 A0,0 0 0 0 526,463.418 L526,432.7969 L516,422.7969 L362,422.7969 A0,0 0 0 0 362,422.7969 " fill="#FBFB77" filter="url(#fhlnoly5e7qh7)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M516,422.7969 L516,432.7969 L526,432.7969 L516,422.7969 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="143" x="368" y="440.3652">一本目のスタートバーの</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="78" x="368" y="455.6758">開始点を検出</text><rect fill="#FEFECE" filter="url(#fhlnoly5e7qh7)" height="62.3984" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="180" x="162" y="411.9082"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="57" x="176" y="433.5098">offset ?: 0</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="131" x="172" y="447.6426">より走査し、数値-255:</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="160" x="172" y="461.7754">白から黒に変わる境目 を探す</text><path d="M383.5,505.1953 L383.5,521.5059 L363.5,525.5059 L383.5,529.5059 L383.5,545.8164 A0,0 0 0 0 383.5,545.8164 L547.5,545.8164 A0,0 0 0 0 547.5,545.8164 L547.5,515.1953 L537.5,505.1953 L383.5,505.1953 A0,0 0 0 0 383.5,505.1953 " fill="#FBFB77" filter="url(#fhlnoly5e7qh7)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M537.5,505.1953 L537.5,515.1953 L547.5,515.1953 L537.5,505.1953 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="143" x="389.5" y="522.7637">一本目のスタートバーの</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="78" x="389.5" y="538.0742">終了点を検出</text><rect fill="#FEFECE" filter="url(#fhlnoly5e7qh7)" height="62.3984" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="223" x="140.5" y="494.3066"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="199" x="154.5" y="515.9082">数値-255が最初に見つかった所から</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="88" x="150.5" y="530.041">同様に数値255:</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="160" x="150.5" y="544.1738">黒から白に変わる境目 を探す</text><path d="M392,580.5273 L392,596.8379 L372,600.8379 L392,604.8379 L392,621.1484 A0,0 0 0 0 392,621.1484 L543,621.1484 A0,0 0 0 0 543,621.1484 L543,590.5273 L533,580.5273 L392,580.5273 A0,0 0 0 0 392,580.5273 " fill="#FBFB77" filter="url(#fhlnoly5e7qh7)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M533,580.5273 L533,590.5273 L543,590.5273 L533,580.5273 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="130" x="398" y="598.0957">これのサイズを基準に</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="130" x="398" y="613.4063">バーコードを検出する</text><rect fill="#FEFECE" filter="url(#fhlnoly5e7qh7)" height="48.2656" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="240" x="132" y="576.7051"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="216" x="146" y="598.3066">一本目のスタートバーの開始点と終了点</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="180" x="142" y="612.4395">からスタートバーのサイズを計算</text><rect fill="#FEFECE" filter="url(#fhlnoly5e7qh7)" height="34.1328" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="248" x="128" y="737.4482"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="224" x="142" y="759.0498">前回の0以外の数値からの距離を計算する</text><path d="M392,788.3369 L392,804.6475 L372,808.6475 L392,812.6475 L392,828.958 A0,0 0 0 0 392,828.958 L565,828.958 A0,0 0 0 0 565,828.958 L565,798.3369 L555,788.3369 L392,788.3369 A0,0 0 0 0 392,788.3369 " fill="#FBFB77" filter="url(#fhlnoly5e7qh7)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M555,788.3369 L555,798.3369 L565,798.3369 L555,788.3369 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="152" x="398" y="805.9053">±15%のサイズを許容する</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="48" x="398" y="821.2158">※要参照</text><rect fill="#FEFECE" filter="url(#fhlnoly5e7qh7)" height="34.1328" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="240" x="132" y="791.5811"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="216" x="146" y="813.1826">スタートバーのサイズ何本分か計算する</text><path d="M410,853.3691 L410,862.0244 L390,866.0244 L410,870.0244 L410,878.6797 A0,0 0 0 0 410,878.6797 L551,878.6797 A0,0 0 0 0 551,878.6797 L551,863.3691 L541,853.3691 L410,853.3691 A0,0 0 0 0 410,853.3691 " fill="#FBFB77" filter="url(#fhlnoly5e7qh7)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M541,853.3691 L541,863.3691 L551,863.3691 L541,853.3691 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="120" x="416" y="870.9375">黒を1、白を0とする</text><rect fill="#FEFECE" filter="url(#fhlnoly5e7qh7)" height="34.1328" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="276" x="114" y="848.958"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="252" x="128" y="870.5596">検出したバーの数だけリストに数値を追加する</text><polygon fill="#FEFECE" filter="url(#fhlnoly5e7qh7)" points="221,688.9707,283,688.9707,295,700.9707,283,712.9707,221,712.9707,209,700.9707,221,688.9707" style="stroke: #A80036; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="22" x="256" y="723.6055">true</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="62" x="221" y="705.1279">0以外の数値</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="25" x="295" y="698.6504">false</text><polygon fill="#FEFECE" filter="url(#fhlnoly5e7qh7)" points="252,903.0908,264,915.0908,252,927.0908,240,915.0908,252,903.0908" style="stroke: #A80036; stroke-width: 1.5;"/><polygon fill="#FEFECE" filter="url(#fhlnoly5e7qh7)" points="224.5,644.9707,279.5,644.9707,291.5,656.9707,279.5,668.9707,224.5,668.9707,212.5,656.9707,224.5,644.9707" style="stroke: #A80036; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="55" x="224.5" y="661.1279">数値を走査</text><rect fill="#FEFECE" filter="url(#fhlnoly5e7qh7)" height="48.2656" style="stroke: #A80036; stroke-width: 1.5;" width="284" x="110" y="969.0908"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="115" x2="115" y1="969.0908" y2="1017.3564"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="389" x2="389" y1="969.0908" y2="1017.3564"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="204" x="124" y="990.6924">検知したリストから各桁を取り出して</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="264" x="120" y="1004.8252">パターンマッチさせてバーコードをデコードする</text><polygon fill="#FEFECE" filter="url(#fhlnoly5e7qh7)" points="191.5,1037.3564,312.5,1037.3564,324.5,1049.3564,312.5,1061.3564,191.5,1061.3564,179.5,1049.3564,191.5,1037.3564" style="stroke: #A80036; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="121" x="191.5" y="1053.5137">バーコードが読み取れた</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="22" x="157.5" y="1047.0361">true</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="25" x="324.5" y="1047.0361">false</text><polygon fill="#FEFECE" filter="url(#fhlnoly5e7qh7)" points="30,1071.3564,248,1071.3564,238,1105.4893,20,1105.4893" style="stroke: #A80036; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="204" x="34" y="1092.958">メイン処理にバーコードの番号を送信</text><ellipse cx="134" cy="1136.4893" fill="#FFFFFF" filter="url(#fhlnoly5e7qh7)" rx="11" ry="11" style="stroke: #000000; stroke-width: 1.0;"/><ellipse cx="134" cy="1136.4893" fill="#000000" rx="6" ry="6" style="stroke: #7F7F7F; stroke-width: 1.0;"/><rect fill="#FEFECE" filter="url(#fhlnoly5e7qh7)" height="34.1328" style="stroke: #A80036; stroke-width: 1.5;" width="204" x="268" y="1071.3564"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="180" x="282" y="1092.958">offset += スタートバーのサイズ</text><polygon fill="#FEFECE" filter="url(#fhlnoly5e7qh7)" points="252,367.9082,264,379.9082,252,391.9082,240,379.9082,252,367.9082" style="stroke: #A80036; stroke-width: 1.5;"/><polygon fill="#FEFECE" filter="url(#fhlnoly5e7qh7)" points="227,1167.4893,277,1167.4893,289,1179.4893,277,1191.4893,227,1191.4893,215,1179.4893,227,1167.4893" style="stroke: #A80036; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="50" x="227" y="1183.6465">k &lt; width</text><polygon fill="#FEFECE" filter="url(#fhlnoly5e7qh7)" points="252,212.3984,264,224.3984,252,236.3984,240,224.3984,252,212.3984" style="stroke: #A80036; stroke-width: 1.5;"/><polygon fill="#FEFECE" filter="url(#fhlnoly5e7qh7)" points="224,1211.4893,280,1211.4893,292,1223.4893,280,1235.4893,224,1235.4893,212,1223.4893,224,1211.4893" style="stroke: #A80036; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="56" x="224" y="1227.6465">n &lt; height</text><rect fill="#FEFECE" filter="url(#fhlnoly5e7qh7)" height="34.1328" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="63" x="220.5" y="1255.4893"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="43" x="230.5" y="1277.0908">Finalize</text><ellipse cx="252" cy="1319.6221" fill="#FFFFFF" filter="url(#fhlnoly5e7qh7)" rx="10" ry="10" style="stroke: #000000; stroke-width: 1.5;"/><line style="stroke: #000000; stroke-width: 2.5;" x1="245.8128" x2="258.1872" y1="1313.4349" y2="1325.8093"/><line style="stroke: #000000; stroke-width: 2.5;" x1="258.1872" x2="245.8128" y1="1313.4349" y2="1325.8093"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="252" x2="252" y1="30" y2="50"/><polygon fill="#A80036" points="248,40,252,50,256,40,252,44" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="252" x2="252" y1="84.1328" y2="104.1328"/><polygon fill="#A80036" points="248,94.1328,252,104.1328,256,94.1328,252,98.1328" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="252" x2="252" y1="138.2656" y2="158.2656"/><polygon fill="#A80036" points="248,148.2656,252,158.2656,256,148.2656,252,152.2656" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="252" x2="252" y1="290.5313" y2="310.5313"/><polygon fill="#A80036" points="248,300.5313,252,310.5313,256,300.5313,252,304.5313" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="252" x2="252" y1="474.3066" y2="494.3066"/><polygon fill="#A80036" points="248,484.3066,252,494.3066,256,484.3066,252,488.3066" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="252" x2="252" y1="556.7051" y2="576.7051"/><polygon fill="#A80036" points="248,566.7051,252,576.7051,256,566.7051,252,570.7051" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="252" x2="252" y1="771.5811" y2="791.5811"/><polygon fill="#A80036" points="248,781.5811,252,791.5811,256,781.5811,252,785.5811" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="252" x2="252" y1="825.7139" y2="848.958"/><polygon fill="#A80036" points="248,838.958,252,848.958,256,838.958,252,842.958" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="252" x2="252" y1="712.9707" y2="737.4482"/><polygon fill="#A80036" points="248,727.4482,252,737.4482,256,727.4482,252,731.4482" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="295" x2="575" y1="700.9707" y2="700.9707"/><polygon fill="#A80036" points="571,798.6475,575,808.6475,579,798.6475,575,802.6475" style="stroke: #A80036; stroke-width: 1.5;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="575" x2="575" y1="700.9707" y2="915.0908"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="575" x2="264" y1="915.0908" y2="915.0908"/><polygon fill="#A80036" points="274,911.0908,264,915.0908,274,919.0908,270,915.0908" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="252" x2="252" y1="883.0908" y2="903.0908"/><polygon fill="#A80036" points="248,893.0908,252,903.0908,256,893.0908,252,897.0908" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="252" x2="252" y1="668.9707" y2="688.9707"/><polygon fill="#A80036" points="248,678.9707,252,688.9707,256,678.9707,252,682.9707" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="252" x2="252" y1="927.0908" y2="937.0908"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="252" x2="593" y1="937.0908" y2="937.0908"/><polygon fill="#A80036" points="589,806.6475,593,796.6475,597,806.6475,593,802.6475" style="stroke: #A80036; stroke-width: 1.5;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="593" x2="593" y1="656.9707" y2="937.0908"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="593" x2="291.5" y1="656.9707" y2="656.9707"/><polygon fill="#A80036" points="301.5,652.9707,291.5,656.9707,301.5,660.9707,297.5,656.9707" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="212.5" x2="92" y1="656.9707" y2="656.9707"/><polygon fill="#A80036" points="88,792.6475,92,802.6475,96,792.6475,92,796.6475" style="stroke: #A80036; stroke-width: 1.5;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="92" x2="92" y1="656.9707" y2="949.0908"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="92" x2="252" y1="949.0908" y2="949.0908"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="252" x2="252" y1="949.0908" y2="969.0908"/><polygon fill="#A80036" points="248,959.0908,252,969.0908,256,959.0908,252,963.0908" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="252" x2="252" y1="624.9707" y2="644.9707"/><polygon fill="#A80036" points="248,634.9707,252,644.9707,256,634.9707,252,638.9707" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="134" x2="134" y1="1105.4893" y2="1125.4893"/><polygon fill="#A80036" points="130,1115.4893,134,1125.4893,138,1115.4893,134,1119.4893" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="179.5" x2="134" y1="1049.3564" y2="1049.3564"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="134" x2="134" y1="1049.3564" y2="1071.3564"/><polygon fill="#A80036" points="130,1061.3564,134,1071.3564,138,1061.3564,134,1065.3564" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="324.5" x2="370" y1="1049.3564" y2="1049.3564"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="370" x2="370" y1="1049.3564" y2="1071.3564"/><polygon fill="#A80036" points="366,1061.3564,370,1071.3564,374,1061.3564,370,1065.3564" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="370" x2="370" y1="1105.4893" y2="1152.4893"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="370" x2="252" y1="1152.4893" y2="1152.4893"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="252" x2="252" y1="1152.4893" y2="1167.4893"/><polygon fill="#A80036" points="248,1157.4893,252,1167.4893,256,1157.4893,252,1161.4893" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="252" x2="252" y1="1017.3564" y2="1037.3564"/><polygon fill="#A80036" points="248,1027.3564,252,1037.3564,256,1027.3564,252,1031.3564" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="252" x2="252" y1="391.9082" y2="411.9082"/><polygon fill="#A80036" points="248,401.9082,252,411.9082,256,401.9082,252,405.9082" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="289" x2="605" y1="1179.4893" y2="1179.4893"/><polygon fill="#A80036" points="601,792.3154,605,782.3154,609,792.3154,605,788.3154" style="stroke: #A80036; stroke-width: 1.5;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="605" x2="605" y1="379.9082" y2="1179.4893"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="605" x2="264" y1="379.9082" y2="379.9082"/><polygon fill="#A80036" points="274,375.9082,264,379.9082,274,383.9082,270,379.9082" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="252" x2="252" y1="344.6641" y2="367.9082"/><polygon fill="#A80036" points="248,357.9082,252,367.9082,256,357.9082,252,361.9082" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="252" x2="252" y1="236.3984" y2="256.3984"/><polygon fill="#A80036" points="248,246.3984,252,256.3984,256,246.3984,252,250.3984" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="292" x2="623" y1="1223.4893" y2="1223.4893"/><polygon fill="#A80036" points="619,738.1826,623,728.1826,627,738.1826,623,734.1826" style="stroke: #A80036; stroke-width: 1.5;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="623" x2="623" y1="224.3984" y2="1223.4893"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="623" x2="264" y1="224.3984" y2="224.3984"/><polygon fill="#A80036" points="274,220.3984,264,224.3984,274,228.3984,270,224.3984" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="252" x2="252" y1="1191.4893" y2="1211.4893"/><polygon fill="#A80036" points="248,1201.4893,252,1211.4893,256,1201.4893,252,1205.4893" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="252" x2="252" y1="192.3984" y2="212.3984"/><polygon fill="#A80036" points="248,202.3984,252,212.3984,256,202.3984,252,206.3984" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="252" x2="252" y1="1235.4893" y2="1255.4893"/><polygon fill="#A80036" points="248,1245.4893,252,1255.4893,256,1245.4893,252,1249.4893" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="252" x2="252" y1="1289.6221" y2="1309.6221"/><polygon fill="#A80036" points="248,1299.6221,252,1309.6221,256,1299.6221,252,1303.6221" style="stroke: #A80036; stroke-width: 1.0;"/><!--
@startuml

start
:Initialize;
: 矩形領域を選択;
: 二値化などの下処理を行う;
repeat
    : n行目を選択;
    : 数値を微分;
        note right: コードが書きやすく成るだけなので\n別に微分しなくていい
    repeat
        : offset ?: 0\nより走査し、数値-255:\n白から黒に変わる境目 を探す;
            note right: 一本目のスタートバーの\n開始点を検出
        : 数値-255が最初に見つかった所から\n同様に数値255:\n黒から白に変わる境目 を探す;
            note right: 一本目のスタートバーの\n終了点を検出
        : 一本目のスタートバーの開始点と終了点\nからスタートバーのサイズを計算;
            note right: これのサイズを基準に\nバーコードを検出する
        while (数値を走査)
            if (0以外の数値) then (true)
                : 前回の0以外の数値からの距離を計算する;
                : スタートバーのサイズ何本分か計算する;
                note right: ±15%のサイズを許容する\n※要参照
                : 検出したバーの数だけリストに数値を追加する;
                note right: 黒を1、白を0とする
            else (false)
            endif
        endwhile
        : 検知したリストから各桁を取り出して\nパターンマッチさせてバーコードをデコードする|
        if (バーコードが読み取れた) then (true)
            : メイン処理にバーコードの番号を送信/
            stop
        else (false)
            : offset += スタートバーのサイズ]
        endif
    repeat while (k < width)
repeat while (n < height)

:Finalize;
end

@enduml

PlantUML version 1.2019.06(Sat May 25 02:10:25 JST 2019)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Java Version: 1.8.0_211-b12
Operating System: Mac OS X
OS Version: 10.14.3
Default Encoding: UTF-8
Language: ja
Country: JP
--></g></svg>